"use strict";(self.webpackChunkreact_portfoliophs=self.webpackChunkreact_portfoliophs||[]).push([[646],{646:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var n=r(397),i=r(579);const o=e=>{let{unity:t}=e;const{unityProvider:r,loadingProgression:o}=(0,n.sT)({loaderUrl:t.loaderUrl,dataUrl:t.dataUrl,frameworkUrl:t.frameworkUrl,codeUrl:t.codeUrl});return(0,i.jsxs)("div",{children:[(0,i.jsxs)("p",{children:["Loading: ",(100*o).toFixed(0),"%"]}),(0,i.jsx)(n.G9,{unityProvider:r,style:{width:t.width||800,height:t.height||600}})]})}},138:function(e,t,r){var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{s(n.next(e))}catch(t){o(t)}}function u(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(s){u=[6,s],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Unity=void 0;var o=r(43),a=r(783),u=r(96),s=(0,o.forwardRef)((function(e,t){var r=(0,o.useState)(null),s=r[0],l=r[1],c=(0,o.useState)(null),d=c[0],v=c[1],f=(0,a.useCanvasIdentifier)(e.id),y=f[0],b=f[1],p=(0,u.useUnityLoader)(e.unityProvider.loaderUrl),m=(0,o.useCallback)((function(t){e.unityProvider.setLoadingProgression(t),1===t&&e.unityProvider.setIsLoaded(!0)}),[e.unityProvider]);return(0,o.useEffect)((function(){return n(void 0,void 0,void 0,(function(){var t,r,n,o,a;return i(this,(function(i){switch(i.label){case 0:if(!s||d||"Loaded"!==p)return[2];console.log("React Unity WebGL: Initializing Unity instance..."),e.unityProvider.setUnityInstance(null),v(null),e.unityProvider.setLoadingProgression(0),null===(a=(o=e.unityProvider).setIsLoaded)||void 0===a||a.call(o,!1),e.unityProvider.setInitialisationError(void 0),b(),t={companyName:e.unityProvider.companyName,productName:e.unityProvider.productName,productVersion:e.unityProvider.productVersion,dataUrl:e.unityProvider.dataUrl,frameworkUrl:e.unityProvider.frameworkUrl,codeUrl:e.unityProvider.codeUrl,workerUrl:e.unityProvider.workerUrl,memoryUrl:e.unityProvider.memoryUrl,symbolsUrl:e.unityProvider.symbolsUrl,streamingAssetsUrl:e.unityProvider.streamingAssetsUrl,devicePixelRatio:e.devicePixelRatio,webglContextAttributes:e.unityProvider.webglContextAttributes,cacheControl:e.unityProvider.cacheControl,autoSyncPersistentDataPath:e.unityProvider.autoSyncPersistentDataPath,matchWebGLToCanvasSize:e.matchWebGLToCanvasSize,disabledCanvasEvents:e.disabledCanvasEvents},Object.keys(t).forEach((function(e){null!==t[e]&&void 0!==t[e]||delete t[e]})),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,window.createUnityInstance(s,t,m)];case 2:return r=i.sent(),v(r),e.unityProvider.setUnityInstance(r),[3,4];case 3:return n=i.sent(),console.error("React Unity WebGL: Error initializing Unity instance:",n),e.unityProvider.setInitialisationError(n),[3,4];case 4:return[2]}}))})),function(){n(void 0,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return d&&s?(console.log("React Unity WebGL: Detaching Unity instance..."),e.unityProvider.setUnityInstance(null),v(null),e.unityProvider.setLoadingProgression(0),null===(n=(r=e.unityProvider).setIsLoaded)||void 0===n||n.call(r,!1),e.unityProvider.setInitialisationError(void 0),(t=document.createElement("canvas")).id=s.id,t.setAttribute("react-unity-webgl-role","cleanup"),t.style.display="none",document.body.appendChild(t),d.Module.canvas=t,v(null),[4,d.Quit()]):[2];case 1:return i.sent(),document.body.removeChild(t),[2]}}))}))}}),[s,d,p,e.unityProvider]),(0,o.useImperativeHandle)(t,(function(){return s})),(0,o.createElement)("canvas",{ref:l,id:y,style:e.style,className:e.className,tabIndex:e.tabIndex})}));t.Unity=s},711:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserEnvironment=void 0,t.isBrowserEnvironment="undefined"!==typeof window&&"undefined"!==typeof document},397:(e,t,r)=>{t.sT=t.G9=void 0;var n=r(138);Object.defineProperty(t,"G9",{enumerable:!0,get:function(){return n.Unity}});var i=r(544);Object.defineProperty(t,"sT",{enumerable:!0,get:function(){return i.useUnityContext}});var o=r(219)},783:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useCanvasIdentifier=void 0;var n=r(43),i=0,o="react-unity-webgl-canvas";t.useCanvasIdentifier=function(e){var t=(0,n.useState)(0),r=t[0],a=t[1],u=(0,n.useCallback)((function(){a((function(e){return e+1}))}),[]);return void 0!==e?[e,u]:[(0,n.useMemo)((function(){return[o,i].join("-")}),[r]),u]}},969:function(e,t,r){var n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSystem=void 0;var i=r(43),o=r(711),a=[];!0===o.isBrowserEnvironment&&(window.dispatchReactUnityEvent=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=void 0;return a.forEach((function(r){i=r.apply(void 0,n([e],t,!1))})),i});t.useEventSystem=function(){var e=(0,i.useRef)([]),t=(0,i.useCallback)((function(t,r){e.current=n(n([],e.current,!0),[{eventName:t,callback:r}],!1)}),[e]),r=(0,i.useCallback)((function(t,r){e.current=e.current.filter((function(e){return e.eventName!==t&&e.callback!==r}))}),[e]),o=(0,i.useCallback)((function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.current.find((function(e){return e.eventName===t}));if("undefined"!==typeof i)return i.callback.apply(i,r)}),[e]);return(0,i.useEffect)((function(){return a.push(o),function(){a.splice(a.indexOf(o),1)}}),[o]),{addEventListener:t,removeEventListener:r}}},544:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityContext=void 0;var n=r(43),i=r(969);t.useUnityContext=function(e){var t=(0,n.useState)(null),r=t[0],o=t[1],a=(0,n.useState)(0),u=a[0],s=a[1],l=(0,n.useState)(!1),c=l[0],d=l[1],v=(0,n.useState)(),f=v[0],y=v[1],b=(0,i.useEventSystem)(),p=(0,n.useRef)({companyName:e.companyName,productName:e.productName,productVersion:e.productVersion,codeUrl:e.codeUrl,dataUrl:e.dataUrl,frameworkUrl:e.frameworkUrl,loaderUrl:e.loaderUrl,memoryUrl:e.memoryUrl,symbolsUrl:e.symbolsUrl,streamingAssetsUrl:e.streamingAssetsUrl,workerUrl:e.workerUrl,webglContextAttributes:e.webglContextAttributes,cacheControl:e.cacheControl,autoSyncPersistentDataPath:e.autoSyncPersistentDataPath,setUnityInstance:o,setLoadingProgression:s,setIsLoaded:d,setInitialisationError:y}),m=(0,n.useCallback)((function(e){return null===r||void 0===r?void 0:r.SetFullscreen(e?1:0)}),[r]),U=(0,n.useCallback)((function(){var e;return null===(e=null===r||void 0===r?void 0:r.Module.canvas)||void 0===e?void 0:e.requestPointerLock()}),[r]),h=(0,n.useCallback)((function(e,t,n){return null===r||void 0===r?void 0:r.SendMessage(e,t,n)}),[r]),P=(0,n.useCallback)((function(e,t){var n;return null===(n=null===r||void 0===r?void 0:r.Module.canvas)||void 0===n?void 0:n.toDataURL(e,t)}),[r]),w=(0,n.useCallback)((function(){var e;return null!==(e=null===r||void 0===r?void 0:r.Quit())&&void 0!==e?e:Promise.reject()}),[r]),g=(0,n.useCallback)((function(){var e;return null===(e=null===r||void 0===r?void 0:r.GetMetricsInfo)||void 0===e?void 0:e.call(r)}),[r]);return{unityProvider:p.current,loadingProgression:u,isLoaded:c,initialisationError:f,requestFullscreen:m,requestPointerLock:U,sendMessage:h,takeScreenshot:P,unload:w,getMetricsInfo:g,addEventListener:b.addEventListener,removeEventListener:b.removeEventListener,UNSAFE__unityInstance:r}}},96:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityLoader=void 0;var n=r(43),i=r(711);t.useUnityLoader=function(e){var t=(0,n.useState)("Loading"),r=t[0],o=t[1];return(0,n.useEffect)((function(){if(!1!==i.isBrowserEnvironment){if(null!==e){var t=window.document.querySelector('script[src="'.concat(e,'"]'));null===t?((t=window.document.createElement("script")).type="text/javascript",t.src=e,t.async=!0,t.setAttribute("data-status","loading"),window.document.body.appendChild(t),t.addEventListener("load",(function(){return null===t||void 0===t?void 0:t.setAttribute("data-status","loaded")})),t.addEventListener("error",(function(){return null===t||void 0===t?void 0:t.setAttribute("data-status","error")}))):o("loaded"===t.getAttribute("data-status")?"Loaded":"Error");var r=function(e){return o("load"===e.type?"Loaded":"Error")};return t.addEventListener("load",r),t.addEventListener("error",r),function(){null!==t&&(t.removeEventListener("load",r),t.removeEventListener("error",r),t.remove())}}o("Idle")}}),[e]),r}},219:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useUnityMetricsInfo=void 0;var n=r(43);t.useUnityMetricsInfo=function(e,t){var r=(0,n.useState)({}),i=r[0],o=r[1];return(0,n.useEffect)((function(){var r=setInterval((function(){var t=e();"undefined"!==typeof t&&o(t)}),t.interval||1e3);return function(){clearInterval(r)}}),[e,t.interval]),i}}}]);
//# sourceMappingURL=646.cd8ce3c7.chunk.js.map